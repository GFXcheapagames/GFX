<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Checkout — GFX Game Store</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Roboto', sans-serif;
    background: #070707;
    color: #fff;
    line-height: 1.5;
  }
  .wrap { max-width: 900px; margin: 30px auto; padding: 20px; }
  header { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; }
  header h1 {
    font-family: 'Orbitron', sans-serif;
    color: #ff3b3b;
    font-size: 26px;
  }
  .back { color: #fff; opacity: 0.9; text-decoration: none; font-size: 16px; transition: 0.2s; }
  .back:hover { opacity: 1; }
  
  .checkout-panel { display: grid; grid-template-columns: 1fr 400px; gap: 20px; margin-top: 20px; }
  
  .items {
    background: #0f0f0f;
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.05);
  }
  .items h3 { margin-bottom: 12px; color: #ff6b6b; font-size: 22px; font-family: 'Orbitron', sans-serif; }

  .item-row { display: flex; gap: 14px; align-items: center; padding: 14px 0; border-bottom: 1px dashed rgba(255,255,255,0.02); }
  .item-row img { width: 120px; height: 80px; object-fit: cover; border-radius: 8px; }
  .item-name { font-weight: 700; color: #fff; font-size: 18px; }
  .item-price { font-weight: 700; color: #ff6b6b; font-size: 16px; margin-top: 6px; }

  .total-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 0; font-size: 24px; font-weight: 900; color: #ff3b3b; }

  .buttons { display: flex; gap: 14px; margin-top: 14px; }
  .btn { padding: 14px 20px; border-radius: 10px; border: none; cursor: pointer; font-weight: 800; font-size: 16px; transition: 0.2s; }
  .cancel { background: transparent; border: 1px solid rgba(255,255,255,0.06); color: #fff; }
  .cancel:hover { background: rgba(255,255,255,0.05); }
  .done { background: linear-gradient(90deg,#ff3b3b,#ff8b6b); color: #000; }
  .done:hover { opacity: 0.9; }

  .empty { color: #bdbdbd; padding: 24px; text-align: center; font-size: 16px; }

  .qrbox {
    background: linear-gradient(180deg,#111,#0c0c0c);
    padding: 18px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.03);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
  }
  .qrbox img { width: 600px; height: 600px; object-fit: contain; border-radius: 20px; transition: width 0.3s,height 0.3s; }
  .upi { font-weight: 800; color: #ff8b8b; font-size: 20px; transition: font-size 0.3s; }
  .small { color: #bdbdbd; font-size: 14px; }

  .copy-btn { margin-left: 8px; padding: 4px 8px; font-size: 12px; border-radius: 6px; border: none; background: #ff3b3b; color: #000; cursor: pointer; font-weight: 700; transition: 0.2s; }
  .copy-btn:hover { background: #ff6b6b; }

  /* Done popup */
  #donePopup {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    z-index: 1500;
    align-items: center;
    justify-content: center;
  }
  #donePopup .popup-content {
    background: #0f0f0f;
    padding: 22px;
    border-radius: 12px;
    max-width: 520px;
    margin: 20px auto;
    text-align: center;
  }
  #donePopup .popup-content h2 { color: #ff6b6b; font-family: 'Orbitron', sans-serif; }
  #donePopup .popup-content p { margin-top: 12px; color: #ddd; font-size: 16px; }
  #donePopup .popup-content .btn { margin-top: 12px; }

  @media (max-width: 880px){ 
    .checkout-panel{grid-template-columns:1fr;gap:20px} 
    .qrbox img{width:90vw;height:90vw} 
    .item-row img{width:120px;height:80px} 
    .item-name{font-size:16px} 
    .item-price{font-size:15px} 
    .total-row{font-size:22px} 
    .upi{font-size:18px} 
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Checkout — GFX Game Store</h1>
    <a href="index.html" class="back">← Continue Shopping</a>
  </header>

  <div class="checkout-panel">
    <div class="items" id="itemsBox">
      <h3>Your selected games</h3>
      <div id="itemsList"></div>
      <div id="itemsEmpty" class="empty">No items in cart.</div>
      <div class="total-row">
        <div>Total</div>
        <div id="grandTotal">₹0</div>
      </div>
      <div class="buttons">
        <button class="btn cancel" id="cancelBtn">Cancel</button>
        <button class="btn done" id="doneBtn">Done</button>
      </div>
    </div>

    <div class="qrbox">
      <div style="text-align:center">
        <div style="font-weight:700;color:#ff3b3b;font-size:20px">Pay via UPI / GPay</div>
        <div class="small" style="margin-top:6px">Scan QR or use UPI ID below</div>
      </div>
      <img src="gpay.jpeg" alt="GPay QR" id="qrImg" />
      <div style="text-align:center">
        <div class="upi">UPI ID: <span id="upiId">aseemn276-2@okhdfcbank</span>
          <button class="copy-btn" id="copyUpi">Copy</button>
        </div>
        <div class="small" style="margin-top:6px">Tip: Open your bank app or GPay to scan the QR code</div>
        <div class="small" style="margin-top:8px">After payment, take a screenshot and send it to WhatsApp: <a href="https://wa.me/917973156083" style="color:#ff6b6b;text-decoration:none">+91 7973156083</a></div>
      </div>
    </div>
  </div>
</div>

<div id="donePopup">
  <div class="popup-content">
    <h2>Payment — Next step</h2>
    <p>Take a screenshot of your successful payment and send it to our WhatsApp: <strong style="color:#ff8b8b">+91 7973156083</strong></p>
    <p>We will deliver the Game ID & Password within 24 hours after verification.</p>
    <div style="margin-top:16px;display:flex;gap:12px;justify-content:center">
      <a href="index.html" class="btn done" style="text-decoration:none;display:inline-block">Home</a>
      <button id="closeDone" class="btn cancel">Close</button>
    </div>
  </div>
</div>

<script>
const CART_KEY = 'gfx_cart';

function readCart() {
  try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch(e){ return []; }
}

function formatPrice(n){ return '₹' + Number(n||0).toFixed(0); }

function renderCheckoutItems(){
  const items = readCart();
  const list = document.getElementById('itemsList');
  const empty = document.getElementById('itemsEmpty');
  list.innerHTML = '';
  if (!items || items.length === 0){
    empty.style.display = 'block';
    document.getElementById('grandTotal').innerText = '₹0';
    return;
  }
  empty.style.display = 'none';
  let total = 0;
  items.forEach(it => {
    total += Number(it.price || 0);
    const row = document.createElement('div');
    row.className = 'item-row';
    row.innerHTML = `
      <img src="${it.img}" alt="${escapeHtml(it.name)}">
      <div style="flex:1">
        <div class="item-name">${escapeHtml(it.name)}</div>
        <div class="item-price">${formatPrice(it.price)}</div>
      </div>
    `;
    list.appendChild(row);
  });
  document.getElementById('grandTotal').innerText = formatPrice(total);
}

function escapeHtml(text) {
  return (text+'').replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; });
}

// Copy UPI
document.getElementById('copyUpi').addEventListener('click', () => {
  const upiText = document.getElementById('upiId').innerText;
  navigator.clipboard.writeText(upiText).then(() => { alert('UPI ID copied to clipboard!'); });
});

// Buttons
document.getElementById('cancelBtn').addEventListener('click', () => { window.location.href = 'index.html'; });
document.getElementById('doneBtn').addEventListener('click', () => { document.getElementById('donePopup').style.display = 'flex'; });
document.getElementById('closeDone').addEventListener('click', () => { document.getElementById('donePopup').style.display = 'none'; });

// Render on load
renderCheckoutItems();
</script>
</body>
</html>
